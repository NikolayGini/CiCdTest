name: Manual Approval Workflow

on:
  workflow_dispatch: # Позволяет запускать workflow вручную через UI GitHub
    inputs:
      version:
        description: 'Version to be updated in pubspec.yaml'
        required: true
        default: '0.0.0+1'

jobs:
  display-inputs:
    runs-on: ubuntu-latest
    steps:
      - name: Display inputs for approval
        run: |
          echo "Parameter 1: ${{ github.event.inputs.param1 }}"
          echo "Parameter 2: ${{ github.event.inputs.param2 }}"

  request-approval:
    runs-on: ubuntu-latest
    needs: display-inputs
    environment:
      name: ci cd workflow
      # Требует одобрения в этом environment
    steps:
      - name: Approval step
        run: echo "This step requires approval"

  after-approval:
    runs-on: ubuntu-latest
    needs: request-approval
    steps:
      - name: Do something after approval
        run: echo "Approved and proceeding with the workflow"
